#region VEXcode Generated Robot Configuration
import math
import random
from vexcode_vr import *

# Brain should be defined by default
brain=Brain()

drivetrain = Drivetrain("drivetrain", 0)
pen = Pen("pen", 8)
pen.set_pen_width(THIN)
left_bumper = Bumper("leftBumper", 2)
right_bumper = Bumper("rightBumper", 3)
front_eye = EyeSensor("frontEye", 4)
down_eye = EyeSensor("downEye", 5)
front_distance = Distance("frontdistance", 6)
distance = front_distance
magnet = Electromagnet("magnet", 7)
location = Location("location", 9)

#endregion VEXcode Generated Robot Configuration
myVariable = 0
CELL = 0
x = 0
y = 0
rightDist = 0
frontDist = 0
leftDist = 0
startX = 0
startY = 0
curX = 0
curY = 0
lap = 0
far = 0

def when_started1():
    global myVariable, CELL, x, y, rightDist, frontDist, leftDist, startX, startY, curX, curY, lap, far
    pen.set_pen_width(THIN)
    pen.set_pen_color(BLUE)
    pen.move(DOWN)
    lap = 0
    startX = location.position(X, MM)
    startY = location.position(Y, MM)
    drivetrain.set_drive_velocity(180, PERCENT)
    drivetrain.set_turn_velocity(180, PERCENT)
    drivetrain.set_timeout(1, SECONDS)
    while not down_eye.detect(RED):
        drivetrain.turn_for(RIGHT, 90, DEGREES)
        rightDist = front_distance.get_distance(MM)
        drivetrain.turn_for(LEFT, 90, DEGREES)
        frontDist = front_distance.get_distance(MM)
        drivetrain.turn_for(LEFT, 90, DEGREES)
        leftDist = front_distance.get_distance(MM)
        drivetrain.turn_for(RIGHT, 90, DEGREES)
        if rightDist > 150:
            drivetrain.turn_for(RIGHT, 90, DEGREES)
            drivetrain.drive_for(FORWARD, 250, MM)
            wait(0.1, SECONDS)
        elif frontDist > 150:
            drivetrain.drive_for(FORWARD, 250, MM)
            wait(0.1, SECONDS)
        elif leftDist > 150:
            drivetrain.turn_for(LEFT, 90, DEGREES)
            drivetrain.drive_for(FORWARD, 250, MM)
            wait(0.1, SECONDS)
        else:
            drivetrain.turn_for(RIGHT, 180, DEGREES)
        wait(2, MSEC)
    drivetrain.turn_for(RIGHT, 180, DEGREES)
    drivetrain.drive_for(FORWARD, 250, MM)
    while not down_eye.detect(RED):
        drivetrain.turn_for(RIGHT, 90, DEGREES)
        rightDist = front_distance.get_distance(MM)
        drivetrain.turn_for(LEFT, 90, DEGREES)
        frontDist = front_distance.get_distance(MM)
        drivetrain.turn_for(LEFT, 90, DEGREES)
        leftDist = front_distance.get_distance(MM)
        drivetrain.turn_for(RIGHT, 90, DEGREES)
        if rightDist > 150:
            drivetrain.turn_for(RIGHT, 90, DEGREES)
            drivetrain.drive_for(FORWARD, 250, MM)
            wait(0.1, SECONDS)
        elif frontDist > 150:
            drivetrain.drive_for(FORWARD, 250, MM)
            wait(0.1, SECONDS)
        elif leftDist > 150:
            drivetrain.turn_for(LEFT, 90, DEGREES)
            drivetrain.drive_for(FORWARD, 250, MM)
            wait(0.1, SECONDS)
        else:
            drivetrain.turn_for(RIGHT, 180, DEGREES)
        wait(2, MSEC)

vr_thread(when_started1)
